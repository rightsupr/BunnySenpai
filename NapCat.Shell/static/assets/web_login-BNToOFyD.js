import{u as g,k as h,j as e,c as b,i as d,a as k,b as j,W as w}from"./index-CccuTvbI.js";import{i as y}from"./chunk-2QAN2V2R-scuJRJyz.js";import{u as v,r as s}from"./react-router-dom-BuK5Vxqh.js";import{c as m}from"./react-hot-toast-LXUdLeap.js";import{I as N}from"./index-BW41MP6H.js";import{P as L,H as W,T as E}from"./pure-HoY1Ompg.js";import{t as u}from"./primitives-D092zWiZ.js";import{l as p}from"./logo-juTWEVZj.js";import"./react-dom-DoC2WAmd.js";import"./monaco-editor-D-sLb42b.js";import"./react-icons-FgIH09Ic.js";import"./chunk-SLABUSGS-BMvBJEIh.js";import"./chunk-EN4B57RQ-D-bHVvCd.js";import"./useToggle-Bk5XweXv.js";import"./openLink-DRU7_5Wb.js";import"./chunk-OPTZHMJX-DnVTyuWi.js";function X(){const l=new URLSearchParams(window.location.search).get("token"),x=v(),[r,n]=s.useState(l||""),[a,i]=s.useState(!1),[,f]=g(h.token,""),o=async()=>{if(!r){m.error("请输入token");return}i(!0);try{const t=await w.loginWithToken(r);t&&(f(t),x("/qq_login",{replace:!0}))}catch(t){m.error(t.message)}finally{i(!1)}},c=t=>{t.key==="Enter"&&!a&&o()};return s.useEffect(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}),[r,a]),s.useEffect(()=>{l&&o()},[]),e.jsxs(e.Fragment,{children:[e.jsx("title",{children:"WebUI登录 - NapCat WebUI"}),e.jsx(L,{children:e.jsx("div",{className:"w-[608px] max-w-full py-8 px-2 md:px-8 overflow-hidden",children:e.jsxs(W,{className:"items-center gap-4 pt-0 pb-6 bg-default-50",maxXRotation:3,maxYRotation:3,children:[e.jsxs(b,{className:"inline-block max-w-lg text-center justify-center",children:[e.jsxs("div",{className:"flex items-center justify-center w-full gap-2 pt-10",children:[e.jsx(d,{alt:"logo",height:"7em",src:p}),e.jsxs("div",{children:[e.jsx("span",{className:u(),children:"Web "}),e.jsx("span",{className:u({color:"violet"}),children:"Login "})]})]}),e.jsx(E,{className:"absolute right-4 top-4"})]}),e.jsxs(k,{className:"flex gap-5 py-5 px-5 md:px-10",children:[e.jsx(y,{isClearable:!0,type:"password",classNames:{label:"text-black/50 dark:text-white/90",input:["bg-transparent","text-black/90 dark:text-white/90","placeholder:text-default-700/50 dark:placeholder:text-white/60"],innerWrapper:"bg-transparent",inputWrapper:["shadow-xl","bg-default-100/70","dark:bg-default/60","backdrop-blur-xl","backdrop-saturate-200","hover:bg-default-0/70","dark:hover:bg-default/70","group-data-[focus=true]:bg-default-100/50","dark:group-data-[focus=true]:bg-default/60","!cursor-text"]},isDisabled:a,label:"Token",placeholder:"请输入token",radius:"lg",size:"lg",startContent:e.jsx(N,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"}),value:r,onChange:t=>n(t.target.value),onClear:()=>n("")}),e.jsxs(j,{className:"mx-10 mt-10 text-lg py-7",color:"primary",isLoading:a,radius:"full",size:"lg",variant:"shadow",onPress:o,children:[!a&&e.jsx(d,{alt:"logo",classNames:{wrapper:"-ml-8"},height:"2em",src:p}),"登录"]})]})]})})})]})}export{X as default};
