import{aK as me,aI as pe,aG as le,O as W,aS as xe,m as De,aC as ve,aD as Se,aB as Pe,aL as re,R as ie,bk as se,bQ as we,c4 as ae}from"./index-CccuTvbI.js";import{$ as ge}from"./usePress-3YWMO_Ik.js";import{c as Fe,d as G,e as Te,f as ce,g as ke,h as Re,i as ue,j as V,o as Me,$ as Ee,a as Ae,b as Le}from"./SelectionManager-FvVuIllO.js";import{r as v,e as Be}from"./react-router-dom-BuK5Vxqh.js";import{$ as be,b as Ne}from"./openLink-DRU7_5Wb.js";const Ce=500;function Oe(r){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:l,onLongPress:o,threshold:s=Ce,accessibilityDescription:c}=r;const u=v.useRef(void 0);let{addGlobalListener:d,removeGlobalListener:b}=me(),{pressProps:S}=ge({isDisabled:e,onPressStart(h){if(h.continuePropagation(),(h.pointerType==="mouse"||h.pointerType==="touch")&&(t&&t({...h,type:"longpressstart"}),u.current=setTimeout(()=>{h.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),pe(h.target).activeElement!==h.target&&le(h.target),o&&o({...h,type:"longpress"}),u.current=void 0},s),h.pointerType==="touch")){let $=p=>{p.preventDefault()};d(h.target,"contextmenu",$,{once:!0}),d(window,"pointerup",()=>{setTimeout(()=>{b(h.target,"contextmenu",$)},30)},{once:!0})}},onPressEnd(h){u.current&&clearTimeout(u.current),l&&(h.pointerType==="mouse"||h.pointerType==="touch")&&l({...h,type:"longpressend"})}}),K=Fe(o&&!e?c:void 0);return{longPressProps:W(S,K)}}function Ke(r){let e=Ve(pe(r));e!==r&&(e&&Ie(e,r),r&&ze(r,e))}function Ie(r,e){r.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:e}))}function ze(r,e){r.dispatchEvent(new FocusEvent("focus",{relatedTarget:e})),r.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:e}))}function Ve(r){let e=xe(r),t=e==null?void 0:e.getAttribute("aria-activedescendant");return t&&r.getElementById(t)||e}var et=De({base:"shrink-0 bg-divider border-none",variants:{orientation:{horizontal:"w-full h-divider",vertical:"h-full w-divider"}},defaultVariants:{orientation:"horizontal"}});function oe(r){return Se()?r.altKey:r.ctrlKey}function Y(r,e){var t,l;let o=`[data-key="${CSS.escape(String(e))}"]`,s=(t=r.current)===null||t===void 0?void 0:t.dataset.collection;return s&&(o=`[data-collection="${CSS.escape(s)}"]${o}`),(l=r.current)===null||l===void 0?void 0:l.querySelector(o)}const $e=new WeakMap;function Ue(r){let e=ve();return $e.set(r,e),e}function We(r){return $e.get(r)}const He=1e3;function Ge(r){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=r,o=v.useRef({search:"",timeout:void 0}).current,s=c=>{let u=Ye(c.key);if(!(!u||c.ctrlKey||c.metaKey||!c.currentTarget.contains(c.target))){if(u===" "&&o.search.trim().length>0&&(c.preventDefault(),"continuePropagation"in c||c.stopPropagation()),o.search+=u,e.getKeyForSearch!=null){let d=e.getKeyForSearch(o.search,t.focusedKey);d==null&&(d=e.getKeyForSearch(o.search)),d!=null&&(t.setFocusedKey(d),l&&l(d))}clearTimeout(o.timeout),o.timeout=setTimeout(()=>{o.search=""},He)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?s:void 0}}}function Ye(r){return r.length===1||!/^[A-Z]/i.test(r)?r:""}function qe(r){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:o=!1,shouldFocusWrap:s=!1,disallowEmptySelection:c=!1,disallowSelectAll:u=!1,escapeKeyBehavior:d="clearSelection",selectOnFocus:b=e.selectionBehavior==="replace",disallowTypeAhead:S=!1,shouldUseVirtualFocus:K,allowsTabNavigation:h=!1,isVirtualized:$,scrollRef:p=l,linkBehavior:B="action"}=r,{direction:R}=Pe(),y=be(),A=n=>{var i;if(n.altKey&&n.key==="Tab"&&n.preventDefault(),!(!((i=l.current)===null||i===void 0)&&i.contains(n.target)))return;const f=(a,I)=>{if(a!=null){if(e.isLink(a)&&B==="selection"&&b&&!oe(n)){Be.flushSync(()=>{e.setFocusedKey(a,I)});let z=Y(l,a),ne=e.getItemProps(a);z&&y.open(z,n,ne.href,ne.routerOptions);return}if(e.setFocusedKey(a,I),e.isLink(a)&&B==="override")return;n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(a):b&&!oe(n)&&e.replaceSelection(a)}};switch(n.key){case"ArrowDown":if(t.getKeyBelow){var D,k,T;let a=e.focusedKey!=null?(D=t.getKeyBelow)===null||D===void 0?void 0:D.call(t,e.focusedKey):(k=t.getFirstKey)===null||k===void 0?void 0:k.call(t);a==null&&s&&(a=(T=t.getFirstKey)===null||T===void 0?void 0:T.call(t,e.focusedKey)),a!=null&&(n.preventDefault(),f(a))}break;case"ArrowUp":if(t.getKeyAbove){var E,C,j;let a=e.focusedKey!=null?(E=t.getKeyAbove)===null||E===void 0?void 0:E.call(t,e.focusedKey):(C=t.getLastKey)===null||C===void 0?void 0:C.call(t);a==null&&s&&(a=(j=t.getLastKey)===null||j===void 0?void 0:j.call(t,e.focusedKey)),a!=null&&(n.preventDefault(),f(a))}break;case"ArrowLeft":if(t.getKeyLeftOf){var Q,Z,J;let a=e.focusedKey!=null?(Q=t.getKeyLeftOf)===null||Q===void 0?void 0:Q.call(t,e.focusedKey):null;a==null&&s&&(a=R==="rtl"?(Z=t.getFirstKey)===null||Z===void 0?void 0:Z.call(t,e.focusedKey):(J=t.getLastKey)===null||J===void 0?void 0:J.call(t,e.focusedKey)),a!=null&&(n.preventDefault(),f(a,R==="rtl"?"first":"last"))}break;case"ArrowRight":if(t.getKeyRightOf){var _,ee,te;let a=e.focusedKey!=null?(_=t.getKeyRightOf)===null||_===void 0?void 0:_.call(t,e.focusedKey):null;a==null&&s&&(a=R==="rtl"?(ee=t.getLastKey)===null||ee===void 0?void 0:ee.call(t,e.focusedKey):(te=t.getFirstKey)===null||te===void 0?void 0:te.call(t,e.focusedKey)),a!=null&&(n.preventDefault(),f(a,R==="rtl"?"last":"first"))}break;case"Home":if(t.getFirstKey){if(e.focusedKey===null&&n.shiftKey)return;n.preventDefault();let a=t.getFirstKey(e.focusedKey,V(n));e.setFocusedKey(a),a!=null&&(V(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(a):b&&e.replaceSelection(a))}break;case"End":if(t.getLastKey){if(e.focusedKey===null&&n.shiftKey)return;n.preventDefault();let a=t.getLastKey(e.focusedKey,V(n));e.setFocusedKey(a),a!=null&&(V(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(a):b&&e.replaceSelection(a))}break;case"PageDown":if(t.getKeyPageBelow&&e.focusedKey!=null){let a=t.getKeyPageBelow(e.focusedKey);a!=null&&(n.preventDefault(),f(a))}break;case"PageUp":if(t.getKeyPageAbove&&e.focusedKey!=null){let a=t.getKeyPageAbove(e.focusedKey);a!=null&&(n.preventDefault(),f(a))}break;case"a":V(n)&&e.selectionMode==="multiple"&&u!==!0&&(n.preventDefault(),e.selectAll());break;case"Escape":d==="clearSelection"&&!c&&e.selectedKeys.size!==0&&(n.stopPropagation(),n.preventDefault(),e.clearSelection());break;case"Tab":if(!h){if(n.shiftKey)l.current.focus();else{let a=we(l.current,{tabbable:!0}),I,z;do z=a.lastChild(),z&&(I=z);while(z);I&&!I.contains(document.activeElement)&&le(I)}break}}},g=v.useRef({top:0,left:0});G(p,"scroll",$?void 0:()=>{var n,i,f,D;g.current={top:(f=(n=p.current)===null||n===void 0?void 0:n.scrollTop)!==null&&f!==void 0?f:0,left:(D=(i=p.current)===null||i===void 0?void 0:i.scrollLeft)!==null&&D!==void 0?D:0}});let N=n=>{if(e.isFocused){n.currentTarget.contains(n.target)||e.setFocused(!1);return}if(n.currentTarget.contains(n.target)){if(e.setFocused(!0),e.focusedKey==null){var i,f;let T=C=>{C!=null&&(e.setFocusedKey(C),b&&!e.isSelected(C)&&e.replaceSelection(C))},E=n.relatedTarget;var D,k;E&&n.currentTarget.compareDocumentPosition(E)&Node.DOCUMENT_POSITION_FOLLOWING?T((D=e.lastSelectedKey)!==null&&D!==void 0?D:(i=t.getLastKey)===null||i===void 0?void 0:i.call(t)):T((k=e.firstSelectedKey)!==null&&k!==void 0?k:(f=t.getFirstKey)===null||f===void 0?void 0:f.call(t))}else!$&&p.current&&(p.current.scrollTop=g.current.top,p.current.scrollLeft=g.current.left);if(e.focusedKey!=null&&p.current){let T=Y(l,e.focusedKey);T instanceof HTMLElement&&(!T.contains(document.activeElement)&&!K&&le(T),se()==="keyboard"&&ue(T,{containingElement:l.current}))}}},m=n=>{n.currentTarget.contains(n.relatedTarget)||e.setFocused(!1)},P=v.useRef(!1);G(l,Te,K?n=>{let{detail:i}=n;n.stopPropagation(),e.setFocused(!0),(i==null?void 0:i.focusStrategy)==="first"&&(P.current=!0)}:void 0);let M=re(()=>{var n,i;let f=(i=(n=t.getFirstKey)===null||n===void 0?void 0:n.call(t))!==null&&i!==void 0?i:null;f==null?(Ke(l.current),e.collection.size>0&&(P.current=!1)):(e.setFocusedKey(f),P.current=!1)});ce(()=>{P.current&&M()},[e.collection,M]);let w=re(()=>{e.collection.size>0&&(P.current=!1)});ce(()=>{w()},[e.focusedKey,w]),G(l,ke,K?n=>{var i;n.stopPropagation(),e.setFocused(!1),!((i=n.detail)===null||i===void 0)&&i.clearFocusKey&&e.setFocusedKey(null)}:void 0);const x=v.useRef(o),L=v.useRef(!1);v.useEffect(()=>{if(x.current){var n,i;let k=null;var f;o==="first"&&(k=(f=(n=t.getFirstKey)===null||n===void 0?void 0:n.call(t))!==null&&f!==void 0?f:null);var D;o==="last"&&(k=(D=(i=t.getLastKey)===null||i===void 0?void 0:i.call(t))!==null&&D!==void 0?D:null);let T=e.selectedKeys;if(T.size){for(let E of T)if(e.canSelectItem(E)){k=E;break}}e.setFocused(!0),e.setFocusedKey(k),k==null&&!K&&l.current&&ie(l.current),e.collection.size>0&&(x.current=!1,L.current=!0)}});let F=v.useRef(e.focusedKey),O=v.useRef(null);v.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==F.current||L.current)&&p.current&&l.current){let n=se(),i=Y(l,e.focusedKey);if(!(i instanceof HTMLElement))return;(n==="keyboard"||L.current)&&(O.current&&cancelAnimationFrame(O.current),O.current=requestAnimationFrame(()=>{p.current&&(Re(p.current,i),n!=="virtual"&&ue(i,{containingElement:l.current}))}))}!K&&e.isFocused&&e.focusedKey==null&&F.current!=null&&l.current&&ie(l.current),F.current=e.focusedKey,L.current=!1}),v.useEffect(()=>()=>{O.current&&cancelAnimationFrame(O.current)},[]),G(l,"react-aria-focus-scope-restore",n=>{n.preventDefault(),e.setFocused(!0)});let U={onKeyDown:A,onFocus:N,onBlur:m,onMouseDown(n){p.current===n.target&&n.preventDefault()}},{typeSelectProps:q}=Ge({keyboardDelegate:t,selectionManager:e});S||(U=W(q,U));let H;K||(H=e.focusedKey==null?0:-1);let X=Ue(e.collection);return{collectionProps:W(U,{tabIndex:H,"data-collection":X})}}function tt(r){let{id:e,selectionManager:t,key:l,ref:o,shouldSelectOnPressUp:s,shouldUseVirtualFocus:c,focus:u,isDisabled:d,onAction:b,allowsDifferentPressOrigin:S,linkBehavior:K="action"}=r,h=be();e=ve(e);let $=i=>{if(i.pointerType==="keyboard"&&oe(i))t.toggleSelection(l);else{if(t.selectionMode==="none")return;if(t.isLink(l)){if(K==="selection"&&o.current){let f=t.getItemProps(l);h.open(o.current,i,f.href,f.routerOptions),t.setSelectedKeys(t.selectedKeys);return}else if(K==="override"||K==="none")return}t.selectionMode==="single"?t.isSelected(l)&&!t.disallowEmptySelection?t.toggleSelection(l):t.replaceSelection(l):i&&i.shiftKey?t.extendSelection(l):t.selectionBehavior==="toggle"||i&&(V(i)||i.pointerType==="touch"||i.pointerType==="virtual")?t.toggleSelection(l):t.replaceSelection(l)}};v.useEffect(()=>{l===t.focusedKey&&t.isFocused&&(c?Ke(o.current):u?u():document.activeElement!==o.current&&o.current&&ie(o.current))},[o,l,t.focusedKey,t.childFocusStrategy,t.isFocused,c]),d=d||t.isDisabled(l);let p={};!c&&!d?p={tabIndex:l===t.focusedKey?0:-1,onFocus(i){i.target===o.current&&t.setFocusedKey(l)}}:d&&(p.onMouseDown=i=>{i.preventDefault()});let B=t.isLink(l)&&K==="override",R=t.isLink(l)&&K!=="selection"&&K!=="none",y=!d&&t.canSelectItem(l)&&!B,A=(b||R)&&!d,g=A&&(t.selectionBehavior==="replace"?!y:!y||t.isEmpty),N=A&&y&&t.selectionBehavior==="replace",m=g||N,P=v.useRef(null),M=m&&y,w=v.useRef(!1),x=v.useRef(!1),L=i=>{if(b&&b(),R&&o.current){let f=t.getItemProps(l);h.open(o.current,i,f.href,f.routerOptions)}},F={ref:o};s?(F.onPressStart=i=>{P.current=i.pointerType,w.current=M,i.pointerType==="keyboard"&&(!m||de())&&$(i)},S?(F.onPressUp=g?void 0:i=>{i.pointerType==="mouse"&&y&&$(i)},F.onPress=g?L:i=>{i.pointerType!=="keyboard"&&i.pointerType!=="mouse"&&y&&$(i)}):F.onPress=i=>{if(g||N&&i.pointerType!=="mouse"){if(i.pointerType==="keyboard"&&!fe())return;L(i)}else i.pointerType!=="keyboard"&&y&&$(i)}):(F.onPressStart=i=>{P.current=i.pointerType,w.current=M,x.current=g,y&&(i.pointerType==="mouse"&&!g||i.pointerType==="keyboard"&&(!A||de()))&&$(i)},F.onPress=i=>{(i.pointerType==="touch"||i.pointerType==="pen"||i.pointerType==="virtual"||i.pointerType==="keyboard"&&m&&fe()||i.pointerType==="mouse"&&x.current)&&(m?L(i):y&&$(i))}),p["data-collection"]=We(t.collection),p["data-key"]=l,F.preventFocusOnPress=c,c&&(F=W(F,{onPressStart(i){i.pointerType!=="touch"&&(t.setFocused(!0),t.setFocusedKey(l))},onPress(i){i.pointerType==="touch"&&(t.setFocused(!0),t.setFocusedKey(l))}}));let{pressProps:O,isPressed:U}=ge(F),q=N?i=>{P.current==="mouse"&&(i.stopPropagation(),i.preventDefault(),L(i))}:void 0,{longPressProps:H}=Oe({isDisabled:!M,onLongPress(i){i.pointerType==="touch"&&($(i),t.setSelectionBehavior("toggle"))}}),X=i=>{P.current==="touch"&&w.current&&i.preventDefault()},n=t.isLink(l)?i=>{Ne.isOpening||i.preventDefault()}:void 0;return{itemProps:W(p,y||g||c&&!d?O:{},M?H:{},{onDoubleClick:q,onDragStartCapture:X,onClick:n,id:e},c?{onMouseDown:i=>i.preventDefault()}:void 0),isPressed:U,isSelected:t.isSelected(l),isFocused:t.isFocused&&t.focusedKey===l,isDisabled:d,allowsSelection:y,hasAction:m}}function fe(){let r=window.event;return(r==null?void 0:r.key)==="Enter"}function de(){let r=window.event;return(r==null?void 0:r.key)===" "||(r==null?void 0:r.code)==="Space"}class ye{getItemRect(e){let t=this.ref.current;if(!t)return null;let l=e!=null?Y(this.ref,e):null;if(!l)return null;let o=t.getBoundingClientRect(),s=l.getBoundingClientRect();return{x:s.left-o.left+t.scrollLeft,y:s.top-o.top+t.scrollTop,width:s.width,height:s.height}}getContentSize(){let e=this.ref.current;var t,l;return{width:(t=e==null?void 0:e.scrollWidth)!==null&&t!==void 0?t:0,height:(l=e==null?void 0:e.scrollHeight)!==null&&l!==void 0?l:0}}getVisibleRect(){let e=this.ref.current;var t,l,o,s;return{x:(t=e==null?void 0:e.scrollLeft)!==null&&t!==void 0?t:0,y:(l=e==null?void 0:e.scrollTop)!==null&&l!==void 0?l:0,width:(o=e==null?void 0:e.offsetWidth)!==null&&o!==void 0?o:0,height:(s=e==null?void 0:e.offsetHeight)!==null&&s!==void 0?s:0}}constructor(e){this.ref=e}}class Xe{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let l=e;for(;l!=null;){let o=this.collection.getItem(l);if((o==null?void 0:o.type)==="item"&&!this.isDisabled(o))return l;l=t(l)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,l=>this.collection.getKeyAfter(l))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,l=>this.collection.getKeyBefore(l))}findKey(e,t,l){let o=e,s=this.layoutDelegate.getItemRect(o);if(!s||o==null)return null;let c=s;do{if(o=t(o),o==null)break;s=this.layoutDelegate.getItemRect(o)}while(s&&l(c,s)&&o!=null);return o}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let t=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyAfter(t))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyBefore(t))}getKeyPageAbove(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!ae(t))return this.getFirstKey();let o=e;if(this.orientation==="horizontal"){let s=Math.max(0,l.x+l.width-this.layoutDelegate.getVisibleRect().width);for(;l&&l.x>s&&o!=null;)o=this.getKeyAbove(o),l=o==null?null:this.layoutDelegate.getItemRect(o)}else{let s=Math.max(0,l.y+l.height-this.layoutDelegate.getVisibleRect().height);for(;l&&l.y>s&&o!=null;)o=this.getKeyAbove(o),l=o==null?null:this.layoutDelegate.getItemRect(o)}return o??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!ae(t))return this.getLastKey();let o=e;if(this.orientation==="horizontal"){let s=Math.min(this.layoutDelegate.getContentSize().width,l.y-l.width+this.layoutDelegate.getVisibleRect().width);for(;l&&l.x<s&&o!=null;)o=this.getKeyBelow(o),l=o==null?null:this.layoutDelegate.getItemRect(o)}else{let s=Math.min(this.layoutDelegate.getContentSize().height,l.y-l.height+this.layoutDelegate.getVisibleRect().height);for(;l&&l.y<s&&o!=null;)o=this.getKeyBelow(o),l=o==null?null:this.layoutDelegate.getItemRect(o)}return o??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let l=this.collection,o=t||this.getFirstKey();for(;o!=null;){let s=l.getItem(o);if(!s)return null;let c=s.textValue.slice(0,e.length);if(s.textValue&&this.collator.compare(c,e)===0)return o;o=this.getNextKey(o)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new ye(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new ye(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function lt(r){let{selectionManager:e,collection:t,disabledKeys:l,ref:o,keyboardDelegate:s,layoutDelegate:c}=r,u=Me({usage:"search",sensitivity:"base"}),d=e.disabledBehavior,b=v.useMemo(()=>s||new Xe({collection:t,disabledKeys:l,disabledBehavior:d,ref:o,collator:u,layoutDelegate:c}),[s,c,t,l,o,u,d]),{collectionProps:S}=qe({...r,ref:o,selectionManager:e,keyboardDelegate:b});return{listProps:S}}class he{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);var l;return t&&(l=t.prevKey)!==null&&l!==void 0?l:null}getKeyAfter(e){let t=this.keyMap.get(e);var l;return t&&(l=t.nextKey)!==null&&l!==void 0?l:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}getChildren(e){let t=this.keyMap.get(e);return(t==null?void 0:t.childNodes)||[]}constructor(e){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=e;let t=c=>{if(this.keyMap.set(c.key,c),c.childNodes&&c.type==="section")for(let u of c.childNodes)t(u)};for(let c of e)t(c);let l=null,o=0;for(let[c,u]of this.keyMap)l?(l.nextKey=c,u.prevKey=l.key):(this.firstKey=c,u.prevKey=void 0),u.type==="item"&&(u.index=o++),l=u,l.nextKey=void 0;var s;this.lastKey=(s=l==null?void 0:l.key)!==null&&s!==void 0?s:null}}function it(r){let{filter:e,layoutDelegate:t}=r,l=Ee(r),o=v.useMemo(()=>r.disabledKeys?new Set(r.disabledKeys):new Set,[r.disabledKeys]),s=v.useCallback(S=>e?new he(e(S)):new he(S),[e]),c=v.useMemo(()=>({suppressTextValueWarning:r.suppressTextValueWarning}),[r.suppressTextValueWarning]),u=Ae(r,s,c),d=v.useMemo(()=>new Le(u,l,{layoutDelegate:t}),[u,l,t]);const b=v.useRef(null);return v.useEffect(()=>{if(l.focusedKey!=null&&!u.getItem(l.focusedKey)&&b.current){const y=b.current.getItem(l.focusedKey),A=[...b.current.getKeys()].map(w=>{const x=b.current.getItem(w);return(x==null?void 0:x.type)==="item"?x:null}).filter(w=>w!==null),g=[...u.getKeys()].map(w=>{const x=u.getItem(w);return(x==null?void 0:x.type)==="item"?x:null}).filter(w=>w!==null);var S,K;const N=((S=A==null?void 0:A.length)!==null&&S!==void 0?S:0)-((K=g==null?void 0:g.length)!==null&&K!==void 0?K:0);var h,$,p;let m=Math.min(N>1?Math.max(((h=y==null?void 0:y.index)!==null&&h!==void 0?h:0)-N+1,0):($=y==null?void 0:y.index)!==null&&$!==void 0?$:0,((p=g==null?void 0:g.length)!==null&&p!==void 0?p:0)-1),P=null,M=!1;for(;m>=0;){if(!d.isDisabled(g[m].key)){P=g[m];break}if(m<g.length-1&&!M)m++;else{M=!0;var B,R;m>((B=y==null?void 0:y.index)!==null&&B!==void 0?B:0)&&(m=(R=y==null?void 0:y.index)!==null&&R!==void 0?R:0),m--}}l.setFocusedKey(P?P.key:null)}b.current=u},[u,d,l,l.focusedKey]),{collection:u,disabledKeys:o,selectionManager:d}}export{lt as $,tt as a,it as b,Oe as c,et as d,qe as e};
